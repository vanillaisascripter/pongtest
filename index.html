<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ping Pong</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #000;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      canvas {
        background: #111;
        touch-action: none;
      }
    </style>
  </head>
  <body>
    <canvas id="game"></canvas>
    <script>
      const canvas = document.getElementById('game');
      const ctx = canvas.getContext('2d');

      // Resize canvas to fit screen
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      window.addEventListener('resize', resize);
      resize();

      // Game objects
      const paddleWidth = 10;
      const paddleHeight = 80;
      const ballSize = 10;
      const left = { x: 20, y: canvas.height / 2 - paddleHeight / 2, dy: 0 };
      const right = { x: canvas.width - 20 - paddleWidth, y: canvas.height / 2 - paddleHeight / 2, dy: 0 };
      const ball = { x: canvas.width / 2, y: canvas.height / 2, dx: 4, dy: 3 };

      // Touch controls
      let touches = [];
      canvas.addEventListener('touchstart', e => { touches = Array.from(e.touches); });
      canvas.addEventListener('touchmove', e => { touches = Array.from(e.touches); });
      canvas.addEventListener('touchend', e => { touches = Array.from(e.touches); });

      // Game loop
      function loop() {
        // Clear canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Update paddles from touch
        left.dy = 0;
        right.dy = 0;
        for (let touch of touches) {
          const y = touch.clientY;
          if (touch.clientX < canvas.width / 2) {
            if (y < left.y + paddleHeight / 2) left.dy = -5;
            else left.dy = 5;
          } else {
            if (y < right.y + paddleHeight / 2) right.dy = -5;
            else right.dy = 5;
          }
        }
        left.y += left.dy;
        right.y += right.dy;

        // Clamp paddles
        left.y = Math.max(0, Math.min(canvas.height - paddleHeight, left.y));
        right.y = Math.max(0, Math.min(canvas.height - paddleHeight, right.y));

        // Update ball
        ball.x += ball.dx;
        ball.y += ball.dy;

        // Wall collisions
        if (ball.y <= 0 || ball.y + ballSize >= canvas.height) {
          ball.dy = -ball.dy;
        }

        // Paddle collisions
        if (
          ball.x <= left.x + paddleWidth &&
          ball.y + ballSize >= left.y &&
          ball.y <= left.y + paddleHeight
        ) {
          ball.dx = Math.abs(ball.dx);
        }
        if (
          ball.x + ballSize >= right.x &&
          ball.y + ballSize >= right.y &&
          ball.y <= right.y + paddleHeight
        ) {
          ball.dx = -Math.abs(ball.dx);
        }

        // Reset ball if scored
        if (ball.x < 0 || ball.x > canvas.width) {
          ball.x = canvas.width / 2;
          ball.y = canvas.height / 2;
          ball.dx = -ball.dx;
        }

        // Draw
        ctx.fillStyle = 'white';
        ctx.fillRect(left.x, left.y, paddleWidth, paddleHeight);
        ctx.fillRect(right.x, right.y, paddleWidth, paddleHeight);
        ctx.fillRect(ball.x, ball.y, ballSize, ballSize);

        requestAnimationFrame(loop);
      }
      loop();
    </script>
  </body>
</html>
